{{ define "title" }}
  {{ .Title }} &ndash; {{ .Site.Title }}
{{ end }}

{{ define "main" }}
<!--
<div id="breadcrumbs" class="entry-meta" style="font-style:normal;font-size:16px;">
<a href="/">Home</a>
{{ range (split .URL "/") }}
    {{ if gt (len . ) 0 }}
        / <a href="/{{ . }}">{{ humanize (replace . "posts" "blog") }}</a>
    {{ end }}
{{ end }}
</div>
-->
<!-- Title -->
<div class="Subhead">
  <div class="Subhead-heading">
    <div class="h1 mt-4 mb-2">{{ .Title }}</div>
  </div>
  <div class="Subhead-description mb-2">
    {{ partial "taxonomy.html" . }}

    {{ if ( default true .Params.showDate ) }}
    <div class="float-md-right">
      <span title="Lastmod: {{ .Lastmod.Format "2006-01-02" }}. Published at: {{ .PublishDate.Format "2006-01-02" }}.">
        {{ if ne .Lastmod .PublishDate }}
          Lastmod: {{ dateFormat ( default "2006-01-02" .Site.Params.dateFormat ) .Lastmod }}
        {{ else }}
          Published: {{ dateFormat "2006-01-02" .PublishDate }}
        {{ end }}
      </span>
    </div>
    {{ end }}
  </div>
</div>
<article>
  <!-- Content -->
  <section class="pb-6 mb-3 border-bottom">
    {{ .Content }}
    {{ $related := .Site.RegularPages.Related . | first 5 }}
    {{ with $related }}
    <div class="related-articles pt-4 mt-5">
      <h3>関連記事</h3>
      <ul>
      	{{ range . }}
      	<li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
      	{{ end }}
      </ul>
    </div>
  {{ end }}

  <!--
  {{- range .Params.authors }}
    {{- with $.Site.GetPage "taxonomyTerm" (printf "authors/%s" (urlize .)) }}
    <div>
      <span>書いた人</span>
      <figure>
        <img src="{{ .Params.photo }}" alt=""/>
        <figcaption>
          <a href="{{ .Permalink }}">{{ .Params.name }}</a>
        </figcaption>
      </figure>
    </div>
    {{ end }}
  {{ end }}
  -->
  </section>

  <section>
    {{ if (default true .Params.comments) }}
      {{ template "_internal/disqus.html" . }}
    {{ end }}
  </section>
</article>
{{ end }}



{{ define "side" }}
  {{ if and (gt .WordCount 0 ) (default true .Params.toc) }}
    <div id="toc" class="Box Box--blue mb-3">
      <b>{{ .Title }}</b>
      {{- $toc := .TableOfContents -}}
      {{- $toc := replaceRE `<nav id="TableOfContents">\n<ul>\n<li>\n<ul>` `<nav id="TableOfContents"><ul>` $toc -}}
      {{- $toc := replaceRE `</ul>\n</li>\n</ul>\n</nav>` `</ul>\n</nav>` $toc -}}
      {{- safeHTML $toc -}}
    </div>
  {{ end }}

  {{ if .Site.Params.ShareTo }}
    {{ $baseURL := .Site.BaseURL }}
    {{ with .Site.Params.ShareTo }}
      <div>
        {{ if in . "Twitter" }}
          <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        {{ end }}

        {{ if in . "Facebook" }}
          <iframe src="https://www.facebook.com/plugins/share_button.php?href=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&layout=button&size=small&mobile_iframe=true&width=61&height=20&appId" width="61" height="20" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true" allow="encrypted-media"></iframe>
        {{ end }}

        {{ if in . "Hatena" }}
          <a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="basic-label-counter" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
        {{ end }}

        {{ if in . "Pocket" }}
          <a data-pocket-label="pocket" data-pocket-count="none" class="pocket-btn" data-lang="en"></a>
          <script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
        {{ end }}

      </div>
    {{ end }}
  {{ else }}
    <div>
      <!-- Do not share -->
    </div>
  {{ end }}
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- 小さめ広告(サイドバー) -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-9794965696431345"
       data-ad-slot="2829940259"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
{{ end }}
